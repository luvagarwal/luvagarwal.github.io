<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Luv Agarwal</title><link rel="stylesheet" href="/styles.css"/><script src="//npmcdn.com/fontfaceobserver@1.7.1/fontfaceobserver.js"></script><script>var font = new FontFaceObserver('leagueSpartan-bold');
font.load().then(function () {
  document.documentElement.className += ' webfonts-loaded';
});
</script></head><body><script>if ('classList' in document.createElement('div') && 'querySelector' in document && 'addEventListener' in window && Array.prototype.forEach) {
  document.documentElement.classList += 'js';
  var script = document.createElement('script');
  script.src = '/bundle.js';
  document.getElementsByTagName('body')[0].appendChild(script);
}
</script><div id="react-mount"><div class="wrap pt-2" data-reactroot="" data-reactid="1" data-react-checksum="749124734"><!-- react-empty: 2 --><header class="header flexItem-none mb-4" role="banner" data-reactid="3"><nav class="fs-5 maxW-4 mx-auto px-2 px-4@sm" role="navigation" data-reactid="4"><h1 class="inline fontSize-inherit" data-reactid="5"><a href="/" data-reactid="6">Luv Agarwal</a></h1><span class="mx-1" data-reactid="7">/</span><a href="/work/" data-reactid="8">Work</a><span class="mx-1" data-reactid="9">/</span><span data-reactid="10">Optimizing React Apps in Practice</span></nav></header><a href="#nav" class="skipLink hide p-1 bgDarker-1" data-reactid="11">Skip to navigation</a><div class="content maxW-4 mx-auto px-2 px-4@sm pb-4" data-reactid="12"><main class="maxW-3 mx-auto mb-2 mb-4@sm" role="main" data-reactid="13"><!-- react-empty: 14 --><article role="article" data-reactid="15"><header data-reactid="16"><h1 class="h1 mb-0" data-reactid="17">Optimizing React Apps in Practice</h1><!-- react-text: 18 --><!-- /react-text --></header><p class="fs-3 mt-2" data-reactid="19">Medium-sized responsive applications are slow. The good news is if you care about performance, it’s fairly easy to make any React application super fast. Here is how.</p><div class="cf mt-2 mt-3@sm" data-reactid="20"><div class="markdown right@sm w-25@sm" data-reactid="21"><h2 class="h5 mb-1" data-reactid="22">Responsibilities</h2><ul class="fs-5" data-reactid="23"><li class="mb-1" data-reactid="24">Front-end development &amp; architecture</li><li class="mb-1" data-reactid="25">Concept generation</li><li class="mb-1" data-reactid="26">Prototyping</li><li class="mb-1" data-reactid="27">UX research, design, &amp; testing</li><li class="mb-1" data-reactid="28">Intensive collaboration with other developers.</li></ul></div><div class="left@sm w-75@sm mt-3 mt-0@sm pr-3@sm" data-reactid="29"><div class="svgHolder" data-reactid="30"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="anAllNewWayToBuildWebsites" viewBox="0 0 1024 768" style="width:100%;height:100%;" aria-labelledby="buildWebsites-title" aria-describedby="buildWebsites-desc" role="img" data-reactid="31"><title id="buildWebsites-title" data-reactid="32">An All-New Way to Build Websites</title><desc id="buildWebsites-desc" data-reactid="33">An animated illustration of a simplified website layout as it adapts to different device sizes.</desc><g id="layout" data-reactid="34"><rect id="layout-1" class="layout" width="1024" height="768" style="stroke-width:8;" data-reactid="35"></rect><rect id="layout-2" class="layout" width="200" height="50" transform="translate(20,20)" data-reactid="36"></rect><rect id="layout-3" class="layout" width="500" height="50" transform="translate(504,20)" data-reactid="37"></rect><rect id="layout-4" class="layout" width="984" height="200" transform="translate(20,90)" data-reactid="38"></rect><rect id="layout-5" class="layout" width="581" height="438" transform="translate(423,310)" data-reactid="39"></rect><rect id="layout-6" class="layout" width="383" height="438" transform="translate(20,310)" data-reactid="40"></rect><g id="container" transform="translate(443,330)" data-reactid="41"><rect id="container-1" class="container" width="374" height="281" data-reactid="42"></rect><rect id="container-2" class="container" width="374" height="97" transform="translate(0,301)" data-reactid="43"></rect><rect id="container-3" class="container" width="150" height="398" transform="translate(394,0)" data-reactid="44"></rect><g id="widget" transform="translate(20,20)" data-reactid="45"><rect id="widget-title" class="widget" width="127" height="1" style="stroke-width:24;" transform="translate(8,12)" data-reactid="46"></rect><g id="widget-col1" transform="translate(0,52)" data-reactid="47"><rect id="widget-text-1" class="widget" width="121" height="1" transform="translate(8,8)" data-reactid="48"></rect><rect id="widget-text-2" class="widget" width="131" height="1" transform="translate(8,40)" data-reactid="49"></rect><rect id="widget-text-3" class="widget" width="111" height="1" transform="translate(8,72)" data-reactid="50"></rect><rect id="widget-text-4" class="widget" width="121" height="1" transform="translate(8,104)" data-reactid="51"></rect><rect id="widget-text-5" class="widget" width="131" height="1" transform="translate(8,136)" data-reactid="52"></rect><rect id="widget-text-6" class="widget" width="91" height="1" transform="translate(8,168)" data-reactid="53"></rect></g><g id="widget-col2" transform="translate(187,52)" data-reactid="54"><rect id="widget-text-7" class="widget" width="101" height="1" transform="translate(8,8)" data-reactid="55"></rect><rect id="widget-text-8" class="widget" width="91" height="1" transform="translate(8,40)" data-reactid="56"></rect><rect id="widget-text-9" class="widget" width="121" height="1" transform="translate(8,72)" data-reactid="57"></rect><rect id="widget-text-10" class="widget" width="101" height="1" transform="translate(8,104)" data-reactid="58"></rect><rect id="widget-text-11" class="widget" width="111" height="1" transform="translate(8,136)" data-reactid="59"></rect></g></g></g></g></svg></div></div></div><div class="markdown mt-3" data-reactid="60"><h1>Mesuring React Performance</h1>
<p>What do I mean by “slow”? Let’s take an example.</p>
<p>I’m working on an open-source project, which leverages material-ui and Redux to provide an admin GUI for any REST API. This application has a datagrid page, displaying a list of records in a table. When the user changes the sort order, or goes to the next page, or filters the result, the interface isn’t as responsive as I would expect. The following screencast shows the refresh slowed down 5 times:</p>
<img src="./board.gif" />
<p>To see what’s happening, I append a ?react_perf to the URL. This enables Component Profiling since React 15.4. I wait for the initial datagrid to load. Then I open the Chrome Developer Tools on the Timeline tab, hit the “Record” button, and click on a table header to update the sort order. Once the data refreshes, I hit the “Record” button again to stop recording, and Chrome displays a yellow flamegraph with a “User Timing” label.</p>
<img src="./p1.png" />
<p>If you’ve never seen a flamegraph, it can look intimidating, but it’s actually very easy to use. This “User Timing” graph shows the time passed in each of your components. It hides the time spend inside React internals (you can’t optimize this time anyway), so it lets you focus on optimizing your app. The Timeline displays screenshots of the window at various stages, this lets me zoom in to the moment I clicked on the table header:</p>
<img src="./p2.png" />
<p>It seems that my app rerenders the <List> component just after clicking on the sort button, before even fetching the REST data. And this takes more than 500ms. The app just updates the sort icon in the table header, and displays a grey overlay on the datagrid to show that the data is being fetched.</p>
<p>To put it otherwise, the app takes half a second to provide visual feedback to a click. Half a second is definitely perceivable - UI experts say that users perceive an interface change as instantaneous when it’s below 100ms. A change slower than that is what I mean by “slow”.</p>
</div><footer data-reactid="61"><noscript data-reactid="62"></noscript></footer></article></main></div><footer class="footer flexItem-none py-3 bgDarker-1" data-reactid="63"><div class="maxW-4 mx-auto px-2 px-4@sm flex@sm flex-wrap" data-reactid="64"><nav id="nav" class="mr-auto@sm" role="navigation" data-reactid="65"><ul class="listReset lineHeight-44 mb-0 flex@sm flex-wrap items-center" data-reactid="66"><li class="inlineBlock mr-3" data-reactid="67"><a href="/" data-reactid="68">Home</a></li><li class="inlineBlock mr-3" data-reactid="69"><a href="/work/" data-reactid="70">Work</a></li><li class="inlineBlock mr-3" data-reactid="71"><a href="/writing/" data-reactid="72">Writing</a></li><li class="inlineBlock mr-3" data-reactid="73"><a href="/Resume.pdf/" data-reactid="74">Résumé</a></li></ul></nav><ul class="listReset lineHeight-44 mb-0 flex@sm flex-wrap items-center" data-reactid="75"><li class="inlineBlock mr-3" data-reactid="76"><a href="mailto:luvagarwal.q@gmail.com" data-reactid="77">Email</a></li><li class="inlineBlock mr-3" data-reactid="78"><a href="https://twitter.com/undefined" data-reactid="79">Twitter</a></li><li class="inlineBlock" data-reactid="80"><a href="https://github.com/luvagarwal" data-reactid="81">GitHub</a></li></ul></div></footer></div></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-99667914-1', 'auto');
ga('send', 'pageview');
</script><script async="" src="https://www.google-analytics.com/analytics.js"></script></body></html>